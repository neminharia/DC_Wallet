(()=>{"use strict";var e={9112:function(e,r,n){var t=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(i,o){function s(e){try{c(t.next(e))}catch(e){o(e)}}function a(e){try{c(t.throw(e))}catch(e){o(e)}}function c(e){var r;e.done?i(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((t=t.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=n(4275),o=n(3961);new class{constructor(){this.ethereumProvider=i.EthereumProvider.getInstance(),this.solanaProvider=o.SolanaProvider.getInstance(),this.initialize()}initialize(){Object.defineProperty(window,"ethereum",{value:this.ethereumProvider,writable:!1,configurable:!0}),Object.defineProperty(window,"solana",{value:this.solanaProvider,writable:!1,configurable:!0}),window.addEventListener("message",this.handleMessage.bind(this))}handleMessage(e){return t(this,void 0,void 0,(function*(){try{if("WEB3_WALLET_REQUEST"!==e.data.type)return;const{provider:r,method:n,params:t,id:i}=e.data;let o;if("ethereum"===r)o=yield this.ethereumProvider.request({method:n,params:t||[]});else{if("solana"!==r)throw new Error("Unknown provider");switch(n){case"connect":o=yield this.solanaProvider.connect();break;case"disconnect":o=yield this.solanaProvider.disconnect();break;case"signTransaction":o=yield this.solanaProvider.signTransaction(t[0]);break;case"signAllTransactions":o=yield this.solanaProvider.signAllTransactions(t[0]);break;case"signMessage":o=yield this.solanaProvider.signMessage(new Uint8Array(t[0]));break;default:throw new Error("Unknown method")}}window.postMessage({type:"WEB3_WALLET_RESPONSE",id:i,result:o},"*")}catch(r){const n=r instanceof Error?r.message:"Unknown error";window.postMessage({type:"WEB3_WALLET_RESPONSE",id:e.data.id,error:n},"*")}}))}}},4275:function(e,r){var n=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(i,o){function s(e){try{c(t.next(e))}catch(e){o(e)}}function a(e){try{c(t.throw(e))}catch(e){o(e)}}function c(e){var r;e.done?i(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((t=t.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.EthereumProvider=void 0;class t{constructor(){}static getInstance(){return t.instance||(t.instance=new t),t.instance}request(e){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{chrome.runtime.sendMessage({type:"ETH_REQUEST",method:e.method,params:e.params},(e=>{e.error?n(new Error(e.error)):r(e.result)}))}))}))}on(e,r){}removeListener(e,r){}}r.EthereumProvider=t},3961:function(e,r){var n=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(i,o){function s(e){try{c(t.next(e))}catch(e){o(e)}}function a(e){try{c(t.throw(e))}catch(e){o(e)}}function c(e){var r;e.done?i(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((t=t.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.SolanaProvider=void 0;class t{constructor(){}static getInstance(){return t.instance||(t.instance=new t),t.instance}connect(){return n(this,void 0,void 0,(function*(){return new Promise(((e,r)=>{chrome.runtime.sendMessage({type:"SOL_CONNECT"},(n=>{n.error?r(new Error(n.error)):e({publicKey:n.result.publicKey})}))}))}))}disconnect(){return n(this,void 0,void 0,(function*(){return new Promise(((e,r)=>{chrome.runtime.sendMessage({type:"SOL_DISCONNECT"},(n=>{n.error?r(new Error(n.error)):e()}))}))}))}signTransaction(e){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{chrome.runtime.sendMessage({type:"SOL_SIGN_TRANSACTION",transaction:e},(e=>{e.error?n(new Error(e.error)):r(e.result)}))}))}))}signAllTransactions(e){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{chrome.runtime.sendMessage({type:"SOL_SIGN_ALL_TRANSACTIONS",transactions:e},(e=>{e.error?n(new Error(e.error)):r(e.result)}))}))}))}signMessage(e){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{chrome.runtime.sendMessage({type:"SOL_SIGN_MESSAGE",message:Array.from(e)},(e=>{e.error?n(new Error(e.error)):r({signature:new Uint8Array(e.result.signature)})}))}))}))}on(e,r){}removeListener(e,r){}}r.SolanaProvider=t}},r={};!function n(t){var i=r[t];if(void 0!==i)return i.exports;var o=r[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}(9112)})();